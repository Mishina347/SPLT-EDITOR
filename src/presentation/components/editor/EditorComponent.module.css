.editorContainer {
	width: 100%;
	height: 100%;
	background-color: var(--app-bg-color, #ffffff);
	/* モバイルでのピンチズームを有効化 */
	touch-action: manipulation;
	-webkit-overflow-scrolling: touch;
}

.editorBody {
	position: relative;
	height: 98%;
	display: flex;
	flex-direction: column;
	/* 長押し選択を有効化 */
	user-select: auto;
	/* モバイルでのピンチズームを有効化 */
	touch-action: manipulation;
	-webkit-overflow-scrolling: touch;
}

/* CodeMirror 6エディタ内では確実にテキスト選択と入力を有効にする */
.editorBody .codemirror-editor-container,
.editorBody .codemirror-editor-container .cm-editor,
.editorBody .codemirror-editor-container .cm-content,
.editorBody .codemirror-editor-container .cm-scroller,
.editorBody .codemirror-editor-container .cm-line,
.editorBody .codemirror-editor-container .cm-editor textarea {
	user-select: text !important;
	-webkit-user-select: text !important;
	-moz-user-select: text !important;
	-ms-user-select: text !important;
	/* 長押し選択を確実に有効化 */
	-webkit-touch-callout: default !important;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
	touch-action: manipulation !important; /* ピンチズームを有効化 */
	pointer-events: auto !important;
	/* IME入力最適化 */
	-webkit-composition-fill-color: transparent;
	-webkit-composition-frame-color: transparent;
	ime-mode: active;
	will-change: auto; /* GPU加速を避けてIME入力を安定化 */
}

/* CodeMirror 6のフォーカス時のアウトラインを削除 */
.editorBody .codemirror-editor-container .cm-focused,
.editorBody .codemirror-editor-container .cm-gutter,
.editorBody .codemirror-editor-container .cm-gutters {
	outline: none !important;
	box-shadow: none !important;
}

/* Monaco Editor内では確実にテキスト選択と入力を有効にする（後方互換性のため残す） */
.editorBody .monaco-editor-container,
.editorBody .monaco-editor,
.editorBody .monaco-editor .view-line,
.editorBody .monaco-editor .monaco-editor-container,
.editorBody .monaco-editor textarea {
	user-select: text !important;
	-webkit-user-select: text !important;
	-moz-user-select: text !important;
	-ms-user-select: text !important;
	/* 長押し選択を確実に有効化 */
	-webkit-touch-callout: default !important;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
	touch-action: manipulation !important; /* ピンチズームを有効化 */
	pointer-events: auto !important;
	/* IME入力最適化 */
	-webkit-composition-fill-color: transparent;
	-webkit-composition-frame-color: transparent;
	ime-mode: active;
	will-change: auto; /* GPU加速を避けてIME入力を安定化 */
}

/* IME入力候補ウィンドウの位置調整 */
.editorBody .codemirror-editor-container .cm-editor textarea {
	/* IME入力時のフォントレンダリング最適化 */
	text-rendering: optimizeSpeed;
	font-kerning: none;
	/* レイアウトシフトを防ぐ */
	contain: layout style;
}

/* IME入力候補ウィンドウの位置調整（Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor textarea {
	/* IME入力時のフォントレンダリング最適化 */
	text-rendering: optimizeSpeed;
	font-kerning: none;
	/* レイアウトシフトを防ぐ */
	contain: layout style;
}

/* 長押し選択を確実に有効化（CodeMirror 6用） */
.editorBody .codemirror-editor-container .cm-line {
	/* 長押し選択を有効化 */
	-webkit-touch-callout: default !important;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
	/* テキスト選択を確実に有効化 */
	user-select: text !important;
	-webkit-user-select: text !important;
	-moz-user-select: text !important;
	-ms-user-select: text !important;
}

/* 長押し選択を確実に有効化（Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor .view-line {
	/* 長押し選択を有効化 */
	-webkit-touch-callout: default !important;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1) !important;
	/* テキスト選択を確実に有効化 */
	user-select: text !important;
	-webkit-user-select: text !important;
	-moz-user-select: text !important;
	-ms-user-select: text !important;
}

/* 選択範囲のスタイルを最適化（CodeMirror 6用） */
.editorBody .codemirror-editor-container .cm-line::selection,
.editorBody .codemirror-editor-container .cm-line *::selection,
.editorBody .codemirror-editor-container .cm-content::selection {
	background-color: rgba(0, 95, 204, 0.3) !important;
	color: inherit !important;
}

/* 選択範囲のスタイルを最適化（Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor .view-line::selection,
.editorBody .monaco-editor .view-line *::selection {
	background-color: rgba(0, 95, 204, 0.3) !important;
	color: inherit !important;
}

/* エディタWrapper - 2段階フォーカス制御 */
.editorWrapper {
	position: relative;
	width: 100%;
	height: 98%;
	outline: none;
	border-radius: 4px;
	transition: all 0.2s ease;
	/* モバイルでのピンチズームを有効化 */
	touch-action: var(--touch-action, manipulation);
	-webkit-overflow-scrolling: touch;
	/* 長押し選択を有効化 */
	-webkit-touch-callout: default;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

/* 外部フォーカス状態 */
.editorWrapper[data-inner-focus='false']:focus {
	outline: none;
	background: var(--app-bg-color, rgba(0, 95, 204, 0.05));
}

/* 内部フォーカス状態 */
.editorWrapper[data-inner-focus='true'] {
	outline: none;
}

/* 指示テキスト */
.instructions {
	position: absolute;
	bottom: 4px;
	left: 50%;
	transform: translateX(-50%);
	background: var(--app-bg-color, rgba(0, 0, 0, 0.8));
	color: var(--app-text-color, #ffffff);
	padding: 4px 8px;
	border-radius: 4px;
	font-size: 0.75rem;
	pointer-events: none;
	opacity: 0;
	transition: opacity 0.3s ease;
	z-index: 1000;
}

/* ページ番号バーのスタイル */
.counterInfoBar {
	width: 100%;
	position: relative;
	display: flex;
	justify-content: flex-end;
	align-items: center;
	background: var(--app-bg-color, #f9f9f9);
	margin-top: 1rem; /* コンテンツの下に配置 */
	opacity: 0.3;
	/* モバイルでの表示位置を調整 */
	margin-right: 4px;
	padding: 0.5rem;
}

.counterInfoBar:hover {
	opacity: 1;
}

/* 外部フォーカス時に指示テキストを表示 */
.editorWrapper[data-inner-focus='false']:focus .instructions {
	opacity: 1;
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
	.instructions {
		font-size: 0.7rem;
		padding: 3px 6px;
		bottom: 8px;
	}

	/* Counterのモバイル表示調整 */
	.counterInfoBar {
		margin-top: 0.5rem;
		padding: 0.25rem;
		opacity: 0.8;
	}

	/* モバイルでのピンチズームを確実に有効化 */
	.editorContainer,
	.editorBody,
	.editorWrapper {
		touch-action: manipulation;
		-webkit-overflow-scrolling: touch;
	}

	/* CodeMirror 6エディタのモバイル最適化 */
	.editorBody .codemirror-editor-container .cm-editor {
		touch-action: manipulation;
		-webkit-overflow-scrolling: touch;
	}

	/* CodeMirror 6のスクロール可能な要素のモバイル最適化 */
	.editorBody .codemirror-editor-container .cm-scroller {
		touch-action: manipulation;
		-webkit-overflow-scrolling: touch;
	}

	/* Monaco Editorのモバイル最適化（後方互換性のため残す） */
	.editorBody .monaco-editor {
		touch-action: manipulation;
		-webkit-overflow-scrolling: touch;
	}

	/* スクロール可能な要素のモバイル最適化（Monaco Editor用、後方互換性のため残す） */
	.editorBody .monaco-editor .monaco-scrollable-element {
		touch-action: manipulation;
		-webkit-overflow-scrolling: touch;
	}
}

/* タイピング中の再描画抑制最適化（CodeMirror 6用） */
.editorBody .codemirror-editor-container .cm-content {
	/* レイヤー合成を最適化 */
	transform: translateZ(0);
	/* 描画範囲の最適化 */
	contain: layout style paint;
	/* アニメーション無効化 */
	animation: none !important;
	transition: none !important;
}

/* テキスト表示領域の最大幅を制限（wordWrapColumnに合わせる、CodeMirror 6用） */
.editorBody .codemirror-editor-container .cm-line {
	/* max-widthはwordWrapColumnの計算値に基づいて動的に設定される */
	/* ここでは基本的な制限のみ設定 */
	max-width: 100%;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* タイピング中の再描画抑制最適化（Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor .view-lines {
	/* レイヤー合成を最適化 */
	transform: translateZ(0);
	/* 描画範囲の最適化 */
	contain: layout style paint;
	/* アニメーション無効化 */
	animation: none !important;
	transition: none !important;
}

/* テキスト表示領域の最大幅を制限（wordWrapColumnに合わせる、Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor .view-lines .view-line {
	/* max-widthはwordWrapColumnの計算値に基づいて動的に設定される */
	/* ここでは基本的な制限のみ設定 */
	max-width: 100%;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* スクリーンリーダー専用テキスト */
.srOnly {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* スクロール時の描画最適化（CodeMirror 6用） */
.editorBody .codemirror-editor-container .cm-scroller {
	/* スクロール中の再描画を最小化 */
	contain: layout;
	/* GPU合成の最適化 */
	will-change: scroll-position;
	/* モバイルでのピンチズームを有効化 */
	touch-action: manipulation;
	-webkit-overflow-scrolling: touch;
}

/* スクロール時の描画最適化（Monaco Editor用、後方互換性のため残す） */
.editorBody .monaco-editor .monaco-scrollable-element {
	/* スクロール中の再描画を最小化 */
	contain: layout;
	/* GPU合成の最適化 */
	will-change: scroll-position;
	/* モバイルでのピンチズームを有効化 */
	touch-action: manipulation;
	-webkit-overflow-scrolling: touch;
}

.maximizeBtnPosition {
	margin: 0;
	position: fixed;
	bottom: 1rem;
	left: 1rem;
}

/* 小画面でのCounter表示調整 */
@media (max-width: 425px) {
	.counterInfoBar {
		margin-top: 0.25rem;
		padding: 0.125rem;
		align-items: baseline;
		justify-content: flex-end;
	}

	.editorBody {
		height: 96%; /* Counterの表示スペースを確保 */
	}
}
